<?xml version="1.0" encoding="utf-8"?>
<!--
  ~ Created by Andrii Kovalchuk
  ~ Copyright (c) 2020. All rights reserved.
  ~ Last modified 05.04.20 16:43
  ~
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at https://mozilla.org/MPL/2.0/.
  -->

<MotionScene

	xmlns:android="http://schemas.android.com/apk/res/android"
	xmlns:app="http://schemas.android.com/apk/res-auto">

	<!-- skip swipe anim -->
	<Transition
		app:constraintSetEnd="@+id/skipCard"
		app:constraintSetStart="@+id/initialState"
		app:duration="300">

		<OnSwipe
			app:dragDirection="dragLeft"
			app:onTouchUp="autoComplete"
			app:touchAnchorId="@id/topCard"
			app:touchAnchorSide="left"
			app:touchRegionId="@id/topCard" />
	</Transition>

	<!-- like swipe anim -->
	<Transition
		app:constraintSetEnd="@+id/likeCard"
		app:constraintSetStart="@+id/initialState"
		app:duration="300">

		<OnSwipe
			app:dragDirection="dragRight"
			app:onTouchUp="autoComplete"
			app:touchAnchorId="@+id/topCard"
			app:touchAnchorSide="right"
			app:touchRegionId="@id/topCard" />
	</Transition>

	<!-- liked off screen anim -->
	<Transition
		app:autoTransition="animateToEnd"
		app:constraintSetEnd="@+id/offScreenLike"
		app:constraintSetStart="@+id/like"
		app:duration="150" />

	<!-- skipped off screen anim -->
	<Transition
		app:autoTransition="animateToEnd"
		app:constraintSetEnd="@+id/offScreenPass"
		app:constraintSetStart="@+id/pass"
		app:duration="150">

	</Transition>

	<!-- replace cards one by one -->
	<Transition
		app:autoTransition="jumpToEnd"
		app:constraintSetEnd="@+id/initialState"
		app:constraintSetStart="@+id/offScreenLike"
		app:duration="0" />

	<!-- rest card state -->
	<ConstraintSet android:id="@+id/initialState">

		<Constraint android:id="@id/topCard"
			android:layout_width="0dp"
			android:layout_height="0dp"
			android:layout_marginBottom="@dimen/general_size_16dp"
			android:layout_marginEnd="@dimen/general_size_16dp"
			android:layout_marginStart="@dimen/general_size_16dp"
			android:layout_marginTop="@dimen/general_size_16dp"

			app:layout_constraintTop_toTopOf="parent"
			app:layout_constraintBottom_toBottomOf="parent"
			app:layout_constraintEnd_toEndOf="parent"
			app:layout_constraintStart_toStartOf="parent"
			/>

		<Constraint android:id="@id/bottomCard">

			<Layout
				android:layout_width="0dp"
				android:layout_height="0dp"
				android:layout_marginBottom="@dimen/general_size_16dp"
				android:layout_marginEnd="@dimen/general_size_16dp"
				android:layout_marginStart="@dimen/general_size_16dp"
				android:layout_marginTop="@dimen/general_size_16dp"

				app:layout_constraintTop_toTopOf="parent"
				app:layout_constraintBottom_toBottomOf="parent"
				app:layout_constraintEnd_toEndOf="parent"
				app:layout_constraintStart_toStartOf="parent"
				/>

			<Transform
				android:scaleX="0.90"
				android:scaleY="0.90"
				/>

		</Constraint>

		<!-- skip overlay -->
		<Constraint android:id="@+id/left_overlay"
			android:layout_width="0dp"
			android:layout_height="0dp"
			android:layout_margin="@dimen/general_size_2dp"
			android:background="@drawable/fragment_card_item_skip_overlay"

			android:alpha="0"

			app:layout_constraintTop_toTopOf="@id/topCard"
			app:layout_constraintBottom_toBottomOf="@id/topCard"
			app:layout_constraintEnd_toEndOf="@id/topCard"
			app:layout_constraintStart_toStartOf="@id/topCard"
			/>

		<!-- like overlay -->
		<Constraint android:id="@+id/right_overlay"
			android:layout_width="0dp"
			android:layout_height="0dp"
			android:layout_margin="@dimen/general_size_2dp"
			android:background="@drawable/fragment_card_item_like_overlay"

			android:alpha="0"

			app:layout_constraintTop_toTopOf="@id/topCard"
			app:layout_constraintBottom_toBottomOf="@id/topCard"
			app:layout_constraintEnd_toEndOf="@id/topCard"
			app:layout_constraintStart_toStartOf="@id/topCard"
			/>

	</ConstraintSet>


	<!-- skip swipe card state -->
	<ConstraintSet android:id="@+id/skipCard"
		app:deriveConstraintsFrom="@+id/initialState">

		<!-- skip overlay -->
		<Constraint android:id="@+id/left_overlay"
			android:layout_width="0dp"
			android:layout_height="0dp"
			android:layout_margin="@dimen/general_size_2dp"
			android:background="@drawable/fragment_card_item_skip_overlay"

			android:alpha="1"

			app:layout_constraintTop_toTopOf="@id/topCard"
			app:layout_constraintBottom_toBottomOf="@id/topCard"
			app:layout_constraintEnd_toEndOf="@id/topCard"
			app:layout_constraintStart_toStartOf="@id/topCard"
			/>

		<Constraint
			android:id="@id/topCard"
			android:layout_width="0dp"
			android:layout_height="0dp"
			android:layout_marginBottom="80dp"
			android:layout_marginEnd="200dp"
			android:layout_marginStart="@dimen/general_size_16dp"
			android:layout_marginTop="@dimen/general_size_16dp"

			android:alpha="0"

			app:layout_constraintTop_toTopOf="parent"
			app:layout_constraintBottom_toBottomOf="parent"
			app:layout_constraintEnd_toEndOf="parent"
			app:layout_constraintStart_toStartOf="parent"
			app:layout_constraintWidth_percent="0.7"
			/>

	</ConstraintSet>

	<!-- skipped off screen card state -->
	<ConstraintSet android:id="@+id/offScreenPass"
		app:deriveConstraintsFrom="@id/skipCard">

		<Constraint
			android:id="@id/topCard"
			android:layout_width="0dp"
			android:layout_height="0dp"

			android:layout_marginStart="@dimen/general_size_16dp"
			android:layout_marginTop="@dimen/general_size_16dp"
			android:layout_marginEnd="500dp"
			android:layout_marginBottom="80dp"

			app:layout_constraintTop_toTopOf="parent"
			app:layout_constraintBottom_toBottomOf="parent"
			app:layout_constraintEnd_toEndOf="parent"
			app:layout_constraintStart_toStartOf="parent"
			app:layout_constraintWidth_percent="0.7">

		</Constraint>

		<Constraint android:id="@id/bottomCard">
			<Transform
				android:scaleX="1"
				android:scaleY="1" />

		</Constraint>


	</ConstraintSet>



	<!-- like swipe card state -->
	<ConstraintSet android:id="@+id/likeCard"
		app:deriveConstraintsFrom="@id/initialState">

		<!-- like overlay -->
		<Constraint android:id="@+id/right_overlay"
			android:layout_width="0dp"
			android:layout_height="0dp"
			android:layout_margin="@dimen/general_size_2dp"
			android:background="@drawable/fragment_card_item_like_overlay"

			android:alpha="1"

			app:layout_constraintTop_toTopOf="@id/topCard"
			app:layout_constraintBottom_toBottomOf="@id/topCard"
			app:layout_constraintEnd_toEndOf="@id/topCard"
			app:layout_constraintStart_toStartOf="@id/topCard"
			/>

		<Constraint
			android:id="@id/topCard"
			android:layout_width="0dp"
			android:layout_height="0dp"
			android:layout_marginBottom="80dp"
			android:layout_marginEnd="@dimen/general_size_16dp"
			android:layout_marginStart="200dp"
			android:layout_marginTop="@dimen/general_size_16dp"

			android:alpha="0.5"

			app:layout_constraintTop_toTopOf="parent"
			app:layout_constraintBottom_toBottomOf="parent"
			app:layout_constraintEnd_toEndOf="parent"
			app:layout_constraintStart_toStartOf="parent"
			app:layout_constraintWidth_percent="0.7"
			/>

	</ConstraintSet>

	<!-- liked off screen card state -->
	<ConstraintSet android:id="@+id/offScreenLike">

		<Constraint
			android:id="@id/topCard"
			android:layout_width="0dp"
			android:layout_height="0dp"
			android:layout_marginBottom="80dp"
			android:layout_marginEnd="@dimen/general_size_16dp"
			android:layout_marginTop="@dimen/general_size_16dp"

			app:layout_constraintTop_toTopOf="parent"
			app:layout_constraintBottom_toBottomOf="parent"
			app:layout_constraintEnd_toEndOf="parent"
			app:layout_constraintStart_toStartOf="parent"
			app:layout_constraintWidth_percent="0.7" />

		<Constraint android:id="@id/bottomCard">

			<Transform
				android:scaleX="1"
				android:scaleY="1" />

		</Constraint>

	</ConstraintSet>

</MotionScene>